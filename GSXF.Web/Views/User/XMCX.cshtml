
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>XMCX</title>

    @Styles.Render("~/Content/easyui")
    @Scripts.Render("~/Content/easyuijs")
    <style>
        td {
            text-align: center;
        }
    </style>
    <link href="~/Content/User/ipage.css" rel="stylesheet" />
    <script>
        $(function () {
            $('#projectdg').datagrid({
                width:'100%',
                height: 'auto',
                rownumbers: true,
                singleSelect: true,
                pagination: true,
                pageList: [10, 20, 30, 50, 100, 200],
                url: '/Data/getProjects',
                method: 'get',
                loadFilter: loadFilter
            });
        });
        function doSearch() {
            $('#projectdg').datagrid('load', {
                Type: $('#type').val(),
                City: $('#city').val(),
                lTime: $('#ltime').val(),
                rTime: $('#rtime').val(),
                Result: $('#result').val(),
                Name: $('#name').val()
            });
        }
        function doReset() {
            $('#type').combobox('setValue', '-1');
            $('#city').combobox('setValue', '-1');
            $('#ltime').datebox('setValue', '');
            $('#rtime').datebox('setValue', '');
            $('#result').combobox('setValue', '-1');
            $('#name').textbox('setValue', '');
            doSearch();
        }

    </script>
</head>
<body >
    <p style="margin-left:10px;">
        项目类型:
        <select class="easyui-combobox" name="Type" id="type" style="width:102px;"
                data-options="panelHeight:'auto'" editable="false">
            <option value="-1">全部</option>
            <option value="0">竣工检测</option>
            <option value="1">年度检测</option>
            <option value="2">维护保养</option>
            <option value="3">安全评估</option>
        </select>
        所属地区:
        <select class="easyui-combobox" name="City" id="city" style="width:80px;" data-options="panelHeight:'102px'" editable="false">
            <option value="-1">全部</option>
            <option value="0">兰州</option>
            <option value="1">天水</option>
            <option value="2">金昌</option>
            <option value="3">白银</option>
            <option value="4">武威</option>
            <option value="5">平凉</option>
            <option value="6">酒泉</option>
            <option value="7">庆阳</option>
            <option value="8">定西</option>
            <option value="9">陇南</option>
            <option value="10">临夏</option>
            <option value="11">嘉峪关</option>
            <option value="12">甘南</option>
            <option value="13">张掖</option>
            <option value="14">兰州新区</option>
        </select>
        报告备案时间:
        <input name="lTime" id="ltime" class="easyui-datebox" style="width:96px;" editable="false">-<input name="rTime" id="rtime" class="easyui-datebox" style="width:96px;" editable="false">
        检测结果:
        <select class="easyui-combobox" name="Result" id="result" style="width:62px;" data-options="panelHeight:'auto'" editable="false">
            <option value="-1">全部</option>
            <option value="0">合格</option>
            <option value="1">不合格</option>
        </select>
        项目名称:
        <input name="Name" id="name" class="easyui-textbox" style="width:120px" />
        <a href="#" class="easyui-linkbutton" iconCls="icon-search" onclick="doSearch()">查询</a>
        <a href="#" class="easyui-linkbutton" iconCls="icon-reload" onclick="doReset()">重置查询</a>
    </p>
        <table id="projectdg">
        <thead>
            <tr>
                <th field="Name" width="300px">项目名称</th>
                <th field="CompanyName" width="260px">服务机构</th>
                <th field="Type" width="100px">项目类型</th>
                <th field="City" width="80px">所属地区</th>
                <th field="RecordDate" width="96px" formatter="formatdate">报告备案时间</th>
                <th field="Result" width="80px" formatter="formatresult">检测结果</th>
            </tr>
        </thead>

    </table>
    <script>
        function formatdate(val, row) {
            return val.substring(0, 10);
            
        }

        function formatresult(val,row) {
                return '合格';
        }
    </script>
</body>
</html>
