@{ 
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>GCSCX</title>
    @Styles.Render("~/Content/easyui")
    @Scripts.Render("~/Content/easyuijs")

    <script>
        $(function () {
            $('#dg').datagrid({
                height: 'auto',
                rownumbers: true,
                singleSelect: true,
                pagination: true,
                pageList: [10, 20, 30, 50, 100, 200],
                url: '/Data/Employees',
                method: 'get',
                loadFilter: function (data) {
                    if (typeof data.length == 'number' && typeof data.splice == 'function') {    // 判断数据是否是数组
                        data = {
                            total: data.length,
                            rows: data
                        }
                    }
                    var dg = $(this);
                    var opts = dg.datagrid('options');
                    var pager = dg.datagrid('getPager');
                    pager.pagination({
                        onSelectPage: function (pageNum, pageSize) {
                            opts.pageNumber = pageNum;
                            opts.pageSize = pageSize;
                            pager.pagination('refresh', {
                                pageNumber: pageNum,
                                pageSize: pageSize
                            });
                            dg.datagrid('loadData', data);
                        }
                    });
                    if (!data.originalRows) {
                        data.originalRows = (data.rows);
                    }
                    var start = (opts.pageNumber - 1) * parseInt(opts.pageSize);
                    var end = start + parseInt(opts.pageSize);
                    data.rows = (data.originalRows.slice(start, end));
                    return data;
                }
            });
        });
        function doSearch() {
            $('#dg').datagrid('load', {
                Level: $('#level').val(),
                CertificateNumber: $('#cn').val(),
                IdentificationNumber:$('#idn').val(),
                Name: $('#name').val()
            });
        }
        function doReset() {
            $('#level').combobox('setValue', '-1');
            $('#cn').textbox('setValue', '');
            $('#IdentificationNumber').textbox('setValue', '');
            $('#name').textbox('setValue', '');
            doSearch();
        }

    </script>
</head>
<body>
    <p style="margin-left:10px;">
        证书类别:
        <select name="Level" id="level" class="easyui-combobox" style="width:102px;"
                data-options="panelHeight:'auto'" editable="false">
            <option value="-1">全部</option>
            <option value="0">一级注册消防工程师</option>
            <option value="1">二级注册消防工程师</option>
            <option value="5">临时注册消防工程师</option>
        </select>
        证书编号:
        <input name="CertificateNumber" id="cn" class="easyui-textbox" style="width:180px" />
        身份证号：
        <input name="IdentificationNumber" id="idn" class="easyui-textbox" style="width:180px" />
        姓名：
        <input name="Name" id="name" class="easyui-textbox" style="width:100px" />
        <a href="#" class="easyui-linkbutton" iconCls="icon-search" onclick="doSearch()">查询</a>
        <a href="#" class="easyui-linkbutton" iconCls="icon-reload" onclick="doReset()">重置查询</a>
    </p>
    <div>
        <table id="dg" class="easyui-datagrid">
            <thead>
                <tr>
                    <th field="Name" width="120">姓名</th>
                    <th field="Gender" width="60">性别</th>
                    <th field="Level" width="160">证书类别</th>
                    <th field="CertificateNumber" width="240">证书编号</th>
                    <th field ="IdentificationNumber" width="240px">身份证号</th>
                    <th field="t" width="60"
                        data-options="formatter:function(value,row){
                            if(row.CompanyName == null)
                                return '否';
                            else return '是';
                        }">是否注册</th>
                    <th field="CompanyName" width="360">注册公司</th>
                </tr>
            </thead>

        </table>
    </div>
</body>
</html>
